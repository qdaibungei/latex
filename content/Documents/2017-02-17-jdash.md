---
layout: post
title: jdashパッケージ
aliases:
    - /2017/02/17/jdash.html
date: 2017-02-17
tags: ["LaTeX", "LaTeXパッケージ"]
---


# 概要
jdashパッケージというLaTeXパッケージを作った。[ダウンロードはここからできる](https://gist.github.com/qdaibungei/4230bb59434ec1ba505bc94dbfde1898)。

jdashというのはjapanese dashの略のつもりである。日本語文に現れる記号ダッシュ `―` は、通常何個か並べて一本の線のようにして使うが、フォントによっては一本の線に見えない。一本の線のように見せるには工夫が必要だ。その工夫をパッケージ化したものがjdashパッケージだ。

ところで、人によってはときおり放心状態で「あ～～～」と声にならない声を発したくなることがある。しかしこれでは、波ダッシュ `～` がつながって見えないのでいまいち放心状態であることが伝達されにくい。そこで波線をつなげられるような工夫が必要となる。jdashパッケージでは、その工夫をも盛り込んだ。

# 使い方
## ダッシュ
この文章でも使っているようなふつうのダッシュ――あるいはダーシとも言う――を出力するには、`\jdash` という命令を使う。

```LaTeX
\jdash{2}
```

のように数字を与えれば、この例の場合2字分の長さのダッシュが出力される。なお、2字分の長さのダッシュ（倍角ダッシュ）に限り、`\――` という命令でも出力可能に設定してある。

デフォルトでは、通常のダッシュ記号 `―` を重ねることで一本につながったダッシュを出力するようにしている。このやり方は美文書などでも紹介されている有名なやり方である。

しかしPDFで見たときダブって見える弱点もある。そこでPDFで閲覧するときのために、罫線 `─` を使った表示ができると都合がよい。そこで容易している命令が `\jdashstyle` である。

```LaTeX
\jdashstyle{―} % デフォルト
\jdash{3} % ダブったダッシュが出る

\jdashstyle{─} % ダッシュ記号を罫線（U+2500）に変更
\jdash{3} % 罫線で出力される

\jdashstyle{rule} % ダッシュ記号を\ruleで生成されるものに変更
\jdash{3} % \ruleで出力される
```

## 波ダッシュ
「あ～～～～」と叫びたいとき、あるいはTeX言語話者らしく「えくすぱんどあふた～～～～！」と叫びたいときには波ダッシュがつながっていると便利だ。そのために `\wdash` という命令を用意してある（wave dashの略のつもり）。

```LaTeX
えくすぱんどあふた\wdash{4}！
```

もしくは、`\～` という命令を並べれば、波ダッシュ記号 `～` がいくらでもつながる。

```LaTeX
えくすぱんどあふた\～\～\～\～\～\～\～！
```

フォントによっては波線同士の食い込み量がまずくて、うまくつながらないかもしれない。その場合は `\wdashKerningAmount{数字}` という命令を使う。数字の単位は `zw` である。

```LaTeX
% \wdashKerningAmount{.25} % デフォルト。0.25zw分、波線が食い込む。
\wdashKerningAmount{.261} % 食い込み具合を変更。筑紫明朝はこのくらい食い込ませるとうまく波線がつながる。
```

なお、一部のライトノベルで使われているような波線 `〰` の表示もできる。このために `\wdashstyle` という命令が容易されている。

```LaTeX
% \wdashstyle{〜} % デフォルト
\wdashstyle{〰} % 波線表示の切り替え
```


# 更新履歴
## 2017年2月17日
- 初版。

## 2019年7月14日
- 依存パッケージとして必須だったotf.styは、今回の変更により、必要なくなった。
- ダッシュの形式を変更するコマンドを使いやすいように作り変えた。
- 倍角ダッシュを、LaTeXの機能である\\ruleによっても出力できるようにした。

## 2020年7月4日
- 従来は`\jdash[2]`という形式で使うコマンドとしていたが、標準的記法に合わせて`\jdash{2}`という形式に変えた。
- `\wdash`というコマンドを追加。
