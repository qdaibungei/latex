<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
        <title>hanmenパッケージ｜文藝部LaTeX研究会</title>
        <link rel="stylesheet" href="https://qdaibungei.github.io/latex/css/reset.css" media="screen" title="no title" charset="utf-8">
        <link rel="stylesheet" href="https://qdaibungei.github.io/latex/css/style.css" media="screen" title="no title" charset="utf-8">
        <link rel="stylesheet" href="https://qdaibungei.github.io/latex/css/syntax.css" media="screen" title="no title" charset="utf-8">
        <link rel="shortcut icon" href="favicon.ico">
        <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
        <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ["\\(","\\)"]] } });</script>
    </head>
    <body>
        <header class="header">
            <h1 class="logo">
                <a href="https://qdaibungei.github.io/latex">文藝部L<span class="a">a</span>T<span class="e">e</span>X研究会</a>
            </h1>

<nav class="global-nav">
    <ul>
        <li class="nav-item"><a href="https://qdaibungei.github.io/latex">HOME</a></li>
        <li class="nav-item"><a href="https://qdaibungei.github.io/latex/about">About</a></li>
        <li class="nav-item active"><a href="https://qdaibungei.github.io/latex/documents">Docs</a></li>
    </ul>
</nav>
</header>
<div class="wrapper clearfix">
<main class="main">
    <div class="content">

<p class="title">
    hanmenパッケージ<br>
    2017/2/18
</p>


<h1 id="はじめに">はじめに</h1>

<p>hanmenパッケージというLaTeXパッケージを作った。<a href="https://gist.github.com/qdaibungei/5f6986fa99fc9a7d86122a7a9417d64e">ダウンロードはここからできる</a>。</p>

<p>hanmenパッケージとは、版面の設計<sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup>を厳密に行うためのパッケージである。たとえば、38字×40行で文書を作りたい、といったときにhanmenパッケージは有用である。</p>

<p>従来、LaTeXでは版面の設計が煩雑であった<sup class="footnote-ref" id="fnref:3"><a href="#fn:3">2</a></sup>。とくに縦組みの場合、geometryパッケージが使えないので厄介である。そこで、縦組みでも版面設計がやりやすいようにと作ったのがhanmenパッケージである。</p>

<p>基本的なアイディアはTomOne氏の『よくわかるLaTeX小説』<sup class="footnote-ref" id="fnref:2"><a href="#fn:2">3</a></sup>による。</p>

<p>なお、2017年2月18日現在、あべのり氏によって開発中のクラスファイルである<a href="https://github.com/abenori/jlreq">jlreq.cls</a>は、従来のクラスファイルより圧倒的に版面設計が行いやすいようになっているようなので、jlreq.clsの安定版がリリースされたあかつきには、hanmenパッケージの存在意義は薄れゆくであろうと思われる。</p>

<h1 id="使い方">使い方</h1>

<h2 id="基本">基本</h2>

<p>基本的な使い方は簡単である。プリアンブルに次のように書き込む。</p>
<div class="highlight"><pre class="chroma"><code class="language-LaTeX" data-lang="LaTeX"><span class="k">\usepackage</span><span class="na">[Q=15,H=24,W=38,L=40]</span><span class="nb">{</span>hanmen<span class="nb">}</span></code></pre></div>
<p>そうすると、</p>

<ul>
<li>文字サイズ　15級</li>
<li>行送り　　　24歯</li>
<li>行長　　　　38字</li>
<li>行数　　　　40行</li>
</ul>

<p>に設定できる。<code>Q</code> は文字サイズの単位「級」に、<code>H</code> は行送りの単位「歯」に、<code>W</code> はwidthに、<code>L</code> はlinesに由来している。</p>

<h2 id="各種オプション">各種オプション</h2>

<p>グリッド線を表示させる（<code>g</code>に代入する値は上の<code>W</code>で指定した文字数と同じか、または近い整数値を入れる）。</p>
<div class="highlight"><pre class="chroma"><code class="language-LaTeX" data-lang="LaTeX"><span class="k">\usepackage</span><span class="na">[g=38]</span><span class="nb">{</span>hanmen<span class="nb">}</span></code></pre></div>
<p>　</p>

<p>縦組みにする。</p>
<div class="highlight"><pre class="chroma"><code class="language-LaTeX" data-lang="LaTeX"><span class="k">\usepackage</span><span class="na">[tate]</span><span class="nb">{</span>hanmen<span class="nb">}</span></code></pre></div>
<p>　</p>

<p>ヘッダ・フッタの位置の調整。</p>
<div class="highlight"><pre class="chroma"><code class="language-LaTeX" data-lang="LaTeX"><span class="k">\usepackage</span>[headheight=13truemm,
            headsep=1truemm,
            footskip=3truemm]<span class="nb">{</span>hanmen<span class="nb">}</span></code></pre></div>
<p>　</p>

<p>小口側に寄せる、天側に寄せる。</p>
<div class="highlight"><pre class="chroma"><code class="language-LaTeX" data-lang="LaTeX"><span class="k">\usepackage</span><span class="na">[ko=3truemm]</span><span class="nb">{</span>hanmen<span class="nb">}</span><span class="err">%%</span> 3mm小口寄せ</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-LaTeX" data-lang="LaTeX"><span class="k">\usepackage</span><span class="na">[te=4truemm]</span><span class="nb">{</span>hanmen<span class="nb">}</span><span class="err">%%</span> 4mm天寄せ</code></pre></div>
<p>　</p>

<p>文字サイズ単位にQではなくptを使う。</p>
<div class="highlight"><pre class="chroma"><code class="language-LaTeX" data-lang="LaTeX"><span class="k">\usepackage</span><span class="na">[pt]</span><span class="nb">{</span>hanmen<span class="nb">}</span></code></pre></div>
<p>　</p>

<p>このパッケージは新ドキュメントクラスで使うことを想定している。旧ドキュメントクラスで使う場合、オプションを付けないと、文字サイズが正しく設定されない。</p>
<div class="highlight"><pre class="chroma"><code class="language-LaTeX" data-lang="LaTeX"><span class="k">\usepackage</span><span class="na">[jisfontzoom]</span><span class="nb">{</span>hanmen<span class="nb">}</span></code></pre></div>
<h1 id="提供されるマクロ">提供されるマクロ</h1>

<h2 id="newhanmen"><code>\newhanmen</code></h2>

<p><code>\newhanmen</code> というマクロが提供される。これは、本文中で、</p>
<div class="highlight"><pre class="chroma"><code class="language-LaTeX" data-lang="LaTeX"><span class="k">\newhanmen</span><span class="nb">{</span>Q=11.5,H=19,W=42,L=17<span class="nb">}</span></code></pre></div>
<p>などとすると、文書の途中から基本版面を再設定できるマクロである。上記のオプションはすべてここでも使うことができる。</p>

<h2 id="hanmenchangedir"><code>\hanmenchangedir</code></h2>

<p>本文領域はそのままに、組方向だけ変えたい場合に使えるのが <code>\hanmenchangedir</code> である。本文中、このマクロを記述すると組方向だけが切り替わる。</p>

<h1 id="提供される機能">提供される機能</h1>

<h2 id="正確な単位の導入">正確な単位の導入</h2>

<p><code>\bQ</code> および <code>\bbp</code> を導入した。これによって、和文文字に関して、より正確に文字サイズを設定できるようになった。</p>

<p>事情を知らない人には意味が分からないだろうが、LaTeXの文字サイズ単位に関しては複雑な事情があり、そのため上のように新たに単位を導入する必要に迫られるのである。詳しくは、吉永氏による<a href="http://www.h4.dion.ne.jp/~latexcat/column/column1.html">クラスファイルにおける文字サイズの設定</a>などを参照せよ。</p>

<h2 id="フォントサイズの再定義">フォントサイズの再定義</h2>

<p>hanmenパッケージで <code>\usepackage[Q=13]{hanmen}</code> のように文字サイズを変更した場合、それに伴って <code>\small</code> や <code>\huge</code> といったLaTeXに備わった文字サイズ変更マクロが再定義され、文字サイズや行送りサイズが、商業出版で行われているように0.5刻みの数値となる（ただし、現時点では、<code>Q=10</code> から <code>Q=16</code> までしか再定義されない）。しかしこれは簡易的なものである。したがって、より組版にこだわる人は、一冊の本を作るごとに別途再定義したほうがよいであろう。</p>

<h2 id="tate-オプション時の挙動"><code>tate</code> オプション時の挙動</h2>

<p>hanmenパッケージ読み込み時、<code>tate</code> オプションを与えると、自動的にPDFが右綴じになる。また、<code>\cleardoublepage</code> が奇数起こしとなるよう再定義される。</p>

<h1 id="おわりに">おわりに</h1>

<p>最近は、日本語で小説を書く時間よりも、TeX言語でパッケージを書く時間のほうが長くなってしまった。文藝部員としては憂うべき事態である。</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1">「版面の設計」とは何かについては、詳しくは<a href="http://t2publisher.xrea.jp/forme/layout.shtml">http://t2publisher.xrea.jp/forme/layout.shtml</a>などを参照せよ。
 <a class="footnote-return" href="#fnref:1">↩</a></li>
<li id="fn:3">煩雑と言っても、原理を理解するのはそれほど難しいことではない。<a href="http://d.hatena.ne.jp/Rion778/20091002/1254482262">ここ</a>に書いてあるように設定すればよいだけではある。ただし記述量が多く、プリアンブルに気軽に置いておける感じではない。そこでパッケージ化する必要が出てくるわけである。
 <a class="footnote-return" href="#fnref:3">↩</a></li>
<li id="fn:2"><a href="http://p-act.sakura.ne.jp/PARALLEL_ACT/LaTeX-Dojin/">よくわかるLaTeX小説サポートページ</a>は大いに参考になる。
 <a class="footnote-return" href="#fnref:2">↩</a></li>
</ol>
</div>

                    </div>
                </main>
            </div>
        <footer class="footer">
            <p class="copyright">
                ©2016–2019 文藝部L<span class="a">a</span>T<span class="e">e</span>X研究会
            </p>
        </footer>
    </body>
</html>

